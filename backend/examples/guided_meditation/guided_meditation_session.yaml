id: guided_meditation_session
name: Guided Meditation Journey
description: A story-like guided meditation with branching paths based on your needs
variables: []
nodes:
- id: welcome_and_branch
  title: Welcome and Quick Assessment
  blocks:
  - type: PRESENT_CONTENT
    payload: "Welcome to your meditation journey! How are you feeling? (stressed/calm/tired)"
  - type: AWAIT_USER_INPUT
    target: Current State
    prompt: ''
  - type: SET_VARIABLE
    target: Stress Level
    action: assess_stress_level
    actionArgs:
      responses: ["{Current State}"]
  - type: CONDITION
    rules:
    - variable: Stress Level
      operator: equals
      value: high
      then:
      - type: GOTO_NODE
        target: stress_relief_path
      else: []
  - type: CONDITION
    rules:
    - variable: Stress Level
      operator: equals
      value: moderate
      then:
      - type: GOTO_NODE
        target: balance_path
      else: []
  - type: CONDITION
    rules:
    - variable: Stress Level
      operator: equals
      value: low
      then:
      - type: GOTO_NODE
        target: exploration_path
      else: []

- id: stress_relief_path
  title: Quick Stress Relief
  blocks:
  - type: PRESENT_CONTENT
    payload: "üåø Entering the healing garden... Let's calm your nervous system with deep breathing."
  - type: SET_VARIABLE
    target: Mindfulness Prompt
    action: generate_mindfulness_prompt
    actionArgs:
      focus_area: "breath"
  - type: PRESENT_CONTENT
    payload: "{Mindfulness Prompt} Breathe in for 4, hold for 7, out for 8..."
  - type: AWAIT_USER_INPUT
    target: Breathing Done
    prompt: "Press Enter when you feel calmer..."
  - type: GOTO_NODE
    target: gentle_closing

- id: balance_path
  title: Finding Balance
  blocks:
  - type: PRESENT_CONTENT
    payload: "üèîÔ∏è Walking the mountain path... Each step brings more clarity and balance."
  - type: SET_VARIABLE
    target: Body Prompt
    action: generate_mindfulness_prompt
    actionArgs:
      focus_area: "body"
  - type: PRESENT_CONTENT
    payload: "{Body Prompt} Feel your inner mountain - steady and strong."
  - type: AWAIT_USER_INPUT
    target: Balance Found
    prompt: "Press Enter when you feel centered..."
  - type: GOTO_NODE
    target: gentle_closing

- id: exploration_path
  title: Peaceful Exploration
  blocks:
  - type: PRESENT_CONTENT
    payload: "üåÖ Floating on the serene lake at sunset... Infinite peace surrounds you."
  - type: SET_VARIABLE
    target: Gratitude Prompt
    action: generate_mindfulness_prompt
    actionArgs:
      focus_area: "gratitude"
  - type: PRESENT_CONTENT
    payload: "{Gratitude Prompt} Each ripple carries appreciation for this moment."
  - type: AWAIT_USER_INPUT
    target: Exploration Complete
    prompt: "Press Enter when ready to return..."
  - type: GOTO_NODE
    target: gentle_closing

- id: gentle_closing
  title: Gentle Return
  blocks:
  - type: PRESENT_CONTENT
    payload: "Take a deep breath and gently return to this moment. You carry this peace with you."
  - type: END_WORKFLOW